<!DOCTYPE html>
<html>
<head>
  <title>Hotel Request Form</title>
  <style>
    /* CSS styles for form layout */


/* Add your custom styles here */

input[type='checkbox'] {
  /* display: none; */
  width: 20px;
  height: 20px;
  border: 2px solid #ccc;
  border-radius: 4px;
  outline: none;
  cursor: pointer;
  transition: background-color 0.3s ease;
}


  </style>
</head>
<body>
  <h1>Hotel Request Form</h1>
  
  <form id="registrationForm">
    <label for="guestCount">Number of Guests:</label>
    <input type="number" id="guestCount" min="1" required>

    <label for="roomCount">Number of Rooms:</label>
    <input type="number" id="roomCount" min="1" required>
    
    <div id="guestDetails">
      <!-- Guest names and year of birth input fields will be dynamically generated here -->
    </div>
    
    <label for="arrivalDate">Arrival Date:</label>
<input type="date" id="arrivalDate" min="2023-11-10" max="2023-11-15" required>

<label for="departureDate">Departure Date:</label>
<input type="date" id="departureDate" min="2023-11-10" max="2023-11-15" required>

    
    <h2>Select Room Allocation:</h2>
    <div id="roomAllocation">
      <!-- <input type="checkbox" /><label>Trial</label> -->
      <!-- Room allocation for each day will be dynamically generated here -->
    </div>
    
    <h2>Select Hotel:</h2>
    <div id="hotelOptions">
      <!-- Hotel options with prices will be dynamically generated here -->
    </div>
    
    <h2>Invoice:</h2>
    <div id="invoice">
      <!-- Invoice details will be dynamically generated here -->
    </div>
    
    <label for="consent">I accept the terms and conditions:</label>
    <input type="checkbox" id="consent" required>
    
    <button type="submit">Submit</button>
  </form>

  <script>
    // JavaScript code for form functionality
    // Add your custom JavaScript code here

    // Dynamically generate guest name and year of birth input fields based on the number of guests
    document.getElementById("guestCount").addEventListener("input", function() {
      var guestCount = parseInt(this.value);
      var guestDetails = document.getElementById("guestDetails");
      guestDetails.innerHTML = ""; // Clear existing fields

      for (var i = 1; i <= guestCount; i++) {
        var guestDiv = document.createElement("div");
        guestDiv.innerHTML = `
          <label for="guestName${i}">Guest Name ${i}:</label>
          <input type="text" id="guestName${i}" required>
          <label for="guestYearOfBirth${i}">Year of Birth:</label>
          <input type="number" id="guestYearOfBirth${i}" min="1950" max="2023" required oninput="validateYearOfBirth()">
          <span id="yearOfBirthError" style="color: red; display: none;">Please enter a valid year of birth (between 1950 and 2023).</span>

        `;
        guestDetails.appendChild(guestDiv);
      }
    });

    

    // Generate room allocation options for each day
    document.getElementById("arrivalDate").addEventListener("input", generateRoomAllocation);
    document.getElementById("departureDate").addEventListener("input", generateRoomAllocation);

    function generateRoomAllocation() {
      var arrivalDate = new Date(document.getElementById("arrivalDate").value);
      var departureDate = new Date(document.getElementById("departureDate").value);
      var roomAllocation = document.getElementById("roomAllocation");
      roomAllocation.innerHTML = ""; // Clear existing fields

      

      var date = new Date(arrivalDate);
      while (date <= departureDate) {
        var formattedDate = date.toLocaleDateString("en-US", { day: "numeric", month: "long", year: "numeric" });
        var roomDiv = document.createElement("div");
        roomDiv.innerHTML = `
          <h3>${formattedDate}</h3>
          <label for="roomCount${formattedDate}">Number of Rooms:</label>
          <input type="number" id="roomCount${formattedDate}" min="0" class="roomCount" required><br>
          <label for="guestCheckboxes${formattedDate}">Guests:</label>
          <div id="guestCheckboxes${formattedDate}">
          </div>
        `;
        console.log(roomAllocation);
        console.log("here")
        roomAllocation.appendChild(roomDiv);
        date.setDate(date.getDate() + 1); // Increment date by 1 day
      }
    }

    function validateYearOfBirth() {
    var yearOfBirthInput = document.getElementById("guestYearOfBirth");
    var yearOfBirthError = document.getElementById("yearOfBirthError");

    var yearOfBirth = parseInt(yearOfBirthInput.value);
    var minYear = parseInt(yearOfBirthInput.min);
    var maxYear = parseInt(yearOfBirthInput.max);

    if (isNaN(yearOfBirth) || yearOfBirth < minYear || yearOfBirth > maxYear) {
      yearOfBirthError.style.display = "inline"; // Show the error message
      yearOfBirthInput.setCustomValidity("Invalid year of birth"); // Set custom validation message
    } else {
      yearOfBirthError.style.display = "none"; // Hide the error message
      yearOfBirthInput.setCustomValidity(""); // Reset custom validation message
    }
  }

      
    
    // // clear existing guest checkboxes
    // var guestCheckboxes = roomAllocation.querySelectorAll("[id^='guestCheckboxes']");
    //   guestCheckboxes.forEach(function (element) {
    //     element.innerHTML = "";
    //   });
// Generate guest checkboxes for room allocation
document.getElementById("registrationForm").addEventListener("input", generateGuestCheckboxes);
function generateGuestCheckboxes() {
  var guestCount = parseInt(document.getElementById("guestCount").value);
  var roomAllocation = document.getElementById("roomAllocation");

  // Generate guest checkboxes for each day
  var arrivalDate = new Date(document.getElementById("arrivalDate").value);
  var departureDate = new Date(document.getElementById("departureDate").value);
  var date = new Date(arrivalDate);
  while (date <= departureDate) {
    var formattedDate = date.toLocaleDateString("en-US", { day: "numeric", month: "long", year: "numeric" });
    var guestCheckboxesDiv = document.getElementById("guestCheckboxes" + formattedDate);

    // Store the current checkbox values
    var currentCheckboxValues = {};
    guestCheckboxesDiv.querySelectorAll('input[type="checkbox"]').forEach(function(checkbox) {
      currentCheckboxValues[checkbox.id] = checkbox.checked;
    });

    // Clear existing guest checkboxes for the specific date
    guestCheckboxesDiv.innerHTML = "";

    for (var i = 1; i <= guestCount; i++) {
      var guestName = document.getElementById("guestName" + i).value;
      var guestCheckbox = document.createElement("input");
      guestCheckbox.type = "checkbox";
      guestCheckbox.name = "guestCheckbox" + formattedDate;
      guestCheckbox.id = "guestCheckbox" + formattedDate + "_" + i;
      guestCheckbox.value = guestName;
      guestCheckbox.classList.add("guestCheckbox");

      // Set the checked state based on the stored values
      if (currentCheckboxValues[guestCheckbox.id]) {
        guestCheckbox.checked = true;
      }

      var guestLabel = document.createElement("label");
      guestLabel.htmlFor = "guestCheckbox" + formattedDate + "_" + i;
      guestLabel.textContent = guestName;

      guestCheckboxesDiv.appendChild(guestCheckbox);
      guestCheckboxesDiv.appendChild(guestLabel);
    }

    date.setDate(date.getDate() + 1); // Increment date by 1 day
  }
}


    // Generate invoice
    // Generate invoice
document.getElementById("registrationForm").addEventListener("input", generateInvoice);

function generateInvoice() {
  var selectedHotel = document.querySelector('input[name="hotelOption"]:checked');
  var roomAllocation = document.querySelectorAll(".roomCount");
  var invoice = document.getElementById("invoice");
  var totalPrice = 0;

  roomAllocation.forEach(function(room) {
    var roomCount = parseInt(room.value);
    totalPrice += roomCount * parseInt(selectedHotel.value.split(":")[1]);
  });

  if (selectedHotel) {
    var hotelName = selectedHotel.value.split(":")[0];
    invoice.innerHTML = `
      <p>Selected Hotel: ${hotelName}</p>
      <p>Total Price: ₹${totalPrice}</p>
      <p>10% Advance Payment: ₹${totalPrice * 0.1}</p>
    `;
  } else {
    invoice.innerHTML = ""; // Clear invoice if no hotel is selected
  }
}

  </script>
</body>
</html>
